<!doctype html>
<html>
  <head>
    <title>Game</title>
    <style>
      /* CSS here */
      #game {
        /* Logic of board design: the .game-square element will take up 1/16 of the total space in this element 400px( game-squares will be 100 px by 100px)ss we want a 4x4 grid .game-squares right sandwiched next to eachother*/

        width: 400px;
            /* to make the square 400px*/
        height: 400px;
            /*to make the square 400px*/
        display: flex;
            /* Extremely important, this  dislay:flex makes sure that all of its direct child elements(.game-square) will follow the next couple of rules, which is what direction it will be in (flex-direction:row -- which will switch it from being a stack vertically to a row horizontally) and then to only fill space to the end of the boundaries of the #game div,( defined as 400px so each should take up 100px worth of space to get that grid), then go to the next row, filling 4 more until all 16 fit*/

        flex-direction: row;
            /* this is telling the child elements that they now need to be in a row, before the next element tells this one what to do, they would all be in a long single line*/
        flex-wrap: wrap;
            /* this is now telling the direct child elements that they should wrap around when there is no more space to fit them on this current row. since this element is 400px wide and the .game-squares are 100px, this should put 4 of them on each row (a 4x4 grid)*/
        /* border: 1px solid red; */
        /*defined during programing to make sure everything fits*/
      }

      .game-square {
        /* Game square element(the one that will be targeted to change for the game mechanics with js) and the reference point for each of the > to identify the child elements*/
        /* Notes on style: This will display in 4 rows of 4, #refrence #game to see how this is done */

        box-sizing: border-box;
          /*Width and height apply to all parts of the element: content, padding and borders
            this means including the border its final width and height are now 100px by 100px
            EXTREMLY important for this to accurately fit inside the grid
          */
        border: 10px solid #000;
          /*Gives a border of 1px solid black*/
        border-radius: 20%;
        width: 100px;
          /*gives a total width including the border of 100px */
        height: 100px;
          /*gives a total height including the border of 100px */
        position: relative;
          /*Element is positioned relative to its normal position,*/
        overflow: hidden;
        /*hidden	The overflow is clipped, and the rest of the content will be invisible if not inside the bounds of the box*/
      }
      .game-square > div {
        /* (Nested 1 layer down from .game-square aka the  first child)
        this will act like a "Drawer" for its child elements to slide in and out of hence why it is 200% taller than its parrent
        */
        width: 100%;
        /*tells you how wide relative to the original size of the element this should be,
        in this case it just takes up 100% of the 100px of space
        */
        height: 200%;
          /*tells you how tall relative to the original size of the element this should be,
          this needs to be twice as tall as its parent element to let the 2nd and first child
          elements nested in it slide back and forth
          */

        position: absolute;
          /* With absolute positioning, an element can be placed anywhere on a page.
          in this case the next property's value is telling you that there should be no space from the top of the page
          */
        top: 0;
          /* There should be no space bewteen the top of this element and the top of the page*/
        transition: 400ms; /* allows you to change property values smoothly (from one value to another), over a given duration. in this case wit will fo from its regulat position to flipped which will make its top -100px and raise it that much */
      }
      .game-square > div > div {
        /*targets the div nested two levels below the top level game square*/
        height: 50%;
        /*because the parent div has a height of 200% if its parent st 100px this will be 100 px to make it 50% smaller than 200px which is 100px*/
      }
      .game-square > div > div:first-child {
        /*target nested 2 levels down from the .game-square element*/
        /*this is targeting the first child(the one to the closest to the top) which will have the the "Default" square color( the one before jquery work is done) the 2nd child will slide up to replace this one
        using nth-child (div(parent):nth-child(n)) would target the element that far down from its parent
        in this case the first element
        */
        background-color: gray;
          /*after being targeted its color is now grey and the rows on bottom should over lap the previus 2nd child from the preceding row, becuase they technically share the same space
          highlight by inspecting the dom for example
          */
      }
      .flip > div {
        /* set to negative, because if it is applied to the 2nd child( what it's targeting) it will slide the whole 50% of its parent ( which is 200(200px) of its parent 100px )
        div(.game-square > div > div) up 100px */
        top: -100%;
        /*ifa applied slides it up 100px*/
      }

      /*COLOR SECTION: this will be applied using jquery to apply random colors to random squares
      There are only 9 colors here, becuase when we play the game it will only need 8 colors since there are 16 squares and every color will appear twice.
      */
      .square-0 {
        background-color: aqua;
      }

      .square-1 {
        background-color: bisque;
      }

      .square-2 {
        background-color: blue;
      }

      .square-3 {
        background-color: blueviolet;
      }

      .square-4 {
        background-color: brown;
      }

      .square-5 {
        background-color: cadetblue;
      }

      .square-6 {
        background-color: chartreuse;
      }

      .square-7 {
        background-color: chocolate;
      }

      .square-8 {
        background-color: coral;
      }

      .square-9 {
        background-color: cornflowerblue;
      }
      @@media only screen and (max-width: 600px)  {
    }
         </style>
  </head>
  <body>
    <div class='container'>
      <div id='game'>
        <!-- Game Ssquares -->
        <div class='game-square'><!-- 1-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!-- 2-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--3-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--4-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--5-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--6-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--7-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--8-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--9-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--10-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--11-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--12-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--13-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--14-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--15-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class='game-square'><!--16-->
          <div>
            <div></div>
            <div></div>
          </div>
        </div>

      </div>
      <button id='reset-button'>reset</button><!--must but in the same container div as the #game div as  for the js to work correctly button needs an id so js can target it in a bit-->
    </div>

    <script>
      // JS Code here
      /*targeting the DOM element with the id of 'reset-button'*/
      var resetButton = document.getElementById("reset-button");
      /*the reason that javascript is need is because we are goingto  use javascript to loop though the square-i (since there are nine colors we define and we started off with a 0 index of square-0) i will be any value 0-9 index*/
      var colors = [];
      /* COLOR aray for pushing the numbers for processing later*/
      for (var i = 0; i < 10; i++) {
        colors.push('square-' + i);
        }

      /*GAME OBJECT:
      game will need to
      1. keep track of the element that represent each Game Square
      2. assign a "square-#" class to one of the nested div's in a Game Square(using the for loop)
      3. get click/taps on a Game Square when they occur(check if the square has been clicked)
      4. keep track of the state of each Game Square(check for change of state(a boolean value)
       */
      function GameSquare(el, color) {
        /* This function defines a "GameSquare" class object and it's properties. It takes in two parameters: el, and color.
        el : The reference to a DOM element. In our case a div.game-square.
        color : The color of a square. This will be the class name that represents the color of the square i.e. "square-0" to "square-9".
        */
          this.el = el;
          /*makes sure than isntead of targeting every DOM object with this class, that it only
          targets the SPECIFIC target that the event happened on
          */
          this.isOpen = false;
          /*open or closed: closed and we see the upper "default"(first-child) div, or open and we see the lower "color" div.*/
          this.isLocked = false;
          /* locked or unlocked: Locked will identify a square as having been matched. In this case we can ignore clicks/taps, and the square stays open.*/
          this.el.addEventListener("click", this, false);
          /* This line adds an event listener that listens for "click" type events. when the square is clicked something should only happen to the particular square that was clicked*/
          this.setColor(color); /* when the object is instatiated it gets a new round of colors from the color array*/
        }
      /* Definition of GameSquare objects functions py use of function prototyping*/
       /*Game Squares need to do the following:

         1. Handle events when they occur.(In this case when clicks happen) We are listening for events but we also need to define what happens when those events occur.
         2.Reset Game Square.(using the  button 'reset-button') This will set the game square back to it's starting state. This will be helpful when want to start the game again.
         3.Lock, when we find a match we will want to lock those game squares.( so no other events other than reset have an affect on them)
         4. Set Color, this will be useful when we restart the game, we want to change the colors and set a new color for each game square.
        */
        /*when either the  game squares  or the reset button are clicked*/
        GameSquare.prototype.handleEvent = function(e) {
          /*Callled with a click event occurr*/
            switch (e.type) {
              /*when the event is triggered to drop into this function, it checks the type of the click*/
              case "click":
                /*if the event type is a click*/
                if (this.isOpen || this.isLocked) {
                  // When a click occurs check to see if the square is already opened (isOpen == true) or (||) if the square is locked (isLocked == true). If either of the cases is true can ignore the click.
                  return;
                }
                this.isOpen = true;
                /*if the square isnt opened (It still hasnt been slid upto the 2nd child due to being clicked)*/
                this.el.classList.add('flip');
                /*add the classs of flip which will make the (.game-square > div > div) slide up 100px and reveal the 2nd element*/
                checkGame(this);
                /*starts the checkGame function to find out is this particular squarethat was clicked on( event triggered) has not been clocked before and therefore has no color*/
            }
          }
          /*LOGIC FOR RESET BUTTON*/
          GameSquare.prototype.reset = function() {
            /*IF THE RESET BUTTON IS CLOCKED*/
              this.isOpen = false;
              /* set all the opens to false*/
              this.isLocked = false;
              /*set all of the locks to false as well to reset logic check in handle even*/
              this.el.classList.remove('flip');
              /*remove any class that has been flipped(top: -100) back into place by removing that class*/
            }

            /*When two squares are matched we'll call lock() on each. To lock a square we need to set is open to true and is locked to true*/
          GameSquare.prototype.lock = function() {
              this.isLocked = true;
              this.isOpen = true;
            }


          GameSquare.prototype.setColor = function(color) {
              /* When the game is reset the colors need to be shuffled, set color allows us assign a new color to each square. This requires that we remove the color class from the second nest div, and add the new color to that div. the el.children targets the children class*/
              this.el.children[0].children[1].classList.remove(this.color);
              /* removed color from its list of classes that it has, so turns it back to its default color
              this.el.children[0] : the game square's child, the "drawer"or "default" div.
              this.el.children[0].children[1] : the second child of the drawer div, this should be the color square or the one below it.
              */
              this.color = color;
              /*gets a new set of colors from the collors array*/
              this.el.children[0].children[1].classList.add(color);
              /*adds those new colors from the array into the class for the new colors*/
            }

    /*GAME SET UP!*/

    var gameSquares = [];
    /* the array  of objectsthat we will push the game squares into and inerate over to access their propertires. unless modified it is set to 16 squares(index
    0-15)*/

    function random(n) {
      /* Helper function that returns between 0 and and integeter version(useing math.random) for any valu passed in
      This function returns a number from 0 to n - 1.Becuase theres are all the 0 indexes that we need
      */
        return Math.floor(Math.random() * n);
      }


      function getSomeColors() {
        var colorscopy = colors.slice();
        /*this pulls from the color array. the .slice method on arrays works like pythons, but if its empty it just makes a copy, which is what we need*/
        var randomColors = [];
        /*Then define a new empty array: randomColors. */
        for (var i = 0; i < 8; i++) {
          /*loop 8 times. */
          var index = random(colorscopy.length);
          /*With each loop get a random index number from 0 to the length of colorsCopy. This is the index of the color we want from the copy of the colors.*/
          randomColors.push(colorscopy.splice(index, 1)[0]);
          /* Using Array.splice() we remove the item at that index and add to randomArray with Array.push().*/
        }
        return randomColors.concat(randomColors.slice());
        /*last step is double the items in the randomArray with Array.slice() to make a copy, and Array.concat() to append the new array on the end. Then return this new array that has the same list repeated.example [8,3,7,8,4,3,5,9,8,3,7,8,4,3,5,9] becuase the original randomColors array was [8,3,7,8,4,3,5,9]*/
      }

      /* Assiging random numbers

      */
      function setupGame() {
        var array = document.getElementsByClassName("game-square");
        /*This function gets a reference to all of the divs with the class .game-square
        it counts all of the occurences of the divs with class .game-square
        */
        var randomColors = getSomeColors();             // Get an array of 8 random color pairs
        for (var i = 0; i < array.length; i++) {
          var index = random(randomColors.length);      // Get a random index
          var color = randomColors.splice(index, 1)[0]; // Get the color at that index
          // Use that color to initialize the GameSquare
          gameSquares.push(new GameSquare(array[i], color));
        }
      }

        setupGame();
    /*  When you click on a square the game needs to ask:
      Is this the first square you clicked on? if so save this square.
      If this is not this is the second square you clicked on compare the colors of the first and the second squares clicked. Do they match? If so, lock them both, if not close them both. */

      var firstSquare = null;
    /*  First add a var to keep track of the first square you click.*/

    function checkGame(gameSquare) {
      /*Takes GameSquare object  as an argument so it can utilize it's methods to fo the game logic*/
        if (firstSquare === null) {
          /*The first step is to check if this is the first square clicked. If firstSquare is null:*/

          firstSquare = gameSquare;
          /* in that case set firstSquare to gameSquare.*/
          return /*after this is done go to the next line of code*/
        }

        if (firstSquare.color === gameSquare.color) {
          /* If firstSquare is not null we need to ask if the color of firstSquare and gameSquare match, if so call GameSquare.lock() on both. If they don't match they both need to be closed. */
          firstSquare.lock(); /*sets islocked and is open to true*/
          gameSquare.lock(); /*sets is locked and is open to true*/
        } else {
          /* will happen before the animation that reveals the color has started! To close the square we can call GameSquare.reset() but this needs to happen after a short delay as defined by the set timeout anonymous function.*/

          var a = firstSquare;
          var b = gameSquare;

          setTimeout(function() {
            /*Using setTimeout() we can execute a function after a short delay but, there is a problem, the references to firstSquare and gameSquare will be lost. To preseve these they need to be assigned to a vars that are scoped to this function.*/
            a.reset(); /*set to a variable scoped in this function, this will put this back to isopen==false and is locked==false so the .flip class will be removed from the game-square div*/
            b.reset(); /*set to a variable scoped in this function, this will put this back to isopen==false and is locked==false so the .flip class will be removed from the game-square div*/
            firstSquare = null;
            /*sets the first squar back to null again*/
          }, 400);
          /*will wait for 400 miliseconds*/
        }
        firstSquare = null;
        /*sets the first square back to null for the next function call*/
      }
      /*RANDOMIZES COLORS*/
      function randomizeColors() {
        /*This is similar to our set up function. Get some random colors, then loop through all of the game squares, for each game pull a random color out of the random colors and set the color of the game square.*/
        var randomColors = getSomeColors();
        /*Uses the GetSomeColors method to get a random color from the colors method at the top*/
        gameSquares.forEach(function(gameSquare) {
          /*what this is saying is that for each of the game suares in this array of objects:*/
          var color = randomColors.splice(random(randomColors.length), 1)[0];
          /*Used to insert or replace elements. in this case its inserted at a random position to replace one elements color in the first game square object, this then goes around for the rest*/
          gameSquare.setColor(color);
          /*after the random is done it sets the randomized color to the game square in question in the foreach loop. this will thrn repeat with the other elements*/
          });
        }



        function clearGame() {
          gameSquares.forEach(function(gameSquare) {
            /*loops through each one go the games square objects in the array and:*/
            gameSquare.reset();
            /*resets them by setting them to open and unlocked*/
          });
          setTimeout(function() {
            randomizeColors();
            /*re randomizes the colors*/
          }, 500);
          /*but only does so afrer 500 miliseconds*/
        }
    resetButton.onclick = function(){
      /*when this button is clicked:*/
       clearGame();
       /*clear the game*/
   }
    </script>
  </body>
</html>
